<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CampusCare | AI-Driven Campus Services</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>

  <header class="glass">
    <a href="index.html" class="logo" style="text-decoration: none;">
      CampusCare
    </a>
    <ul class="nav-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#modules">Services</a></li>
      <li><a href="#notices">Notices</a></li>
      <li><a href="#complaint-wall">Public Wall</a></li>
      <li><a href="#faculty">Faculty</a></li>
    </ul>
    <!-- LOGIN BUTTON (Visible by default) -->
    <a href="login.html" id="loginBtn" class="btn-login" style="text-decoration:none;">Login / Sign Up</a>

    <!-- USER PROFILE (Hidden by default) -->
    <div id="userProfile" class="user-profile">
      <span id="userName" class="user-name">Hello, User</span>
      <img id="userAvatar" class="user-avatar" src="https://ui-avatars.com/api/?name=User&background=random"
        alt="Profile" onclick="toggleProfileMenu()">

      <!-- DROPDOWN MENU -->
      <div id="profileMenu" class="glass"
        style="display: none; position: absolute; top: 50px; right: 0; flex-direction: column; width: 200px; padding: 1rem; background: white; z-index: 2000;">
        <p
          style="border-bottom: 1px solid #eee; padding-bottom: 0.5rem; margin-bottom: 0.5rem; font-weight: bold; font-size: 0.9rem;">
          Account Details
        </p>
        <p id="userDetails" style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">
          Role: Student<br>ID: CSE-2025-001
        </p>
        <button onclick="logout()"
          style="background: #ef4444; color: white; border: none; padding: 0.5rem; width: 100%; border-radius: 5px; cursor: pointer;">
          <i class="fa-solid fa-right-from-bracket"></i> Logout
        </button>
      </div>
    </div>
  </header>

  <section class="hero" id="home"
    style="position: relative; padding: 1rem 5% 0.5rem; display: flex; flex-direction: column; align-items: center; text-align: center;">
    <h1>Smart Campus Management<br>Powered by AI</h1>
    <p style="margin-bottom: 1.5rem;">Seamlessly integrating Students, Teachers, and Hostels into one digital ecosystem.
    </p>

    <!-- Hero Image in Foreground (Clean & Sharp) -->
    <div class="hero-banner" style="width: 100%; max-width: 450px; animation: float 6s ease-in-out infinite;">
      <img src="assets/images/hero-illustration.png" alt="Campus Illustration"
        style="width: 100%; height: auto; display: block; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));">
    </div>
  </section>

  <!-- Add slight floating animation for life -->
  <style>
    @keyframes float {
      0% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-15px);
      }

      100% {
        transform: translateY(0px);
      }
    }
  </style>

  <section class="modules-section" id="modules">
    <h2 class="section-title">Core Services</h2>
    <div class="modules-grid">

      <a href="student/index.html" class="module-card glass student-card" style="text-decoration:none;"
        onclick="checkModuleAccess(event, ['student', 'hosteler'])">
        <i class="fa-solid fa-user-graduate module-icon"></i>
        <div class="module-title">Student Services</div>
        <div class="module-desc">Your digital backpack. Access assignments, view exam routines, and manage personal
          documents.</div>
      </a>

      <a href="teacher/index.html" class="module-card glass teacher-card" style="text-decoration:none;"
        onclick="checkModuleAccess(event, ['teacher'])">
        <i class="fa-solid fa-chalkboard-user module-icon"></i>
        <div class="module-title">Teacher Portal</div>
        <div class="module-desc">Streamline grading, publish notices, and manage class schedules effortlessly.</div>
      </a>

      <a href="hostel/index.html" class="module-card glass hostel-card" style="text-decoration:none;"
        onclick="checkModuleAccess(event, ['hosteler'])">
        <i class="fa-solid fa-bed module-icon"></i>
        <div class="module-title">Hosteler Hub</div>
        <div class="module-desc">Check mess menus, apply for leave, and receive instant hostel announcements.</div>
      </a>

      <a href="complaints/index.html" class="module-card glass ai-card" style="text-decoration:none;"
        onclick="checkModuleAccess(event, 'any')">
        <i class="fa-solid fa-robot module-icon"></i>
        <div class="module-title">AI Complaints</div>
        <div class="module-desc"><strong>Flagship:</strong> AI-powered issue tracking. Auto-route complaints and track
          resolution in real-time.</div>
      </a>
    </div>
  </section>

  <!-- NOTICE BOARD SECTION -->
  <section class="notice-section" id="notices" style="padding: 2rem 5%; background: rgba(255,255,255,0.4);">
    <h2 class="section-title">Campus Notice Board</h2>
    <div class="notice-wrapper" id="public-notice-list">
      <!-- JS Injected Notices -->
      <p style="text-align:center;">Loading notices...</p>
    </div>
  </section>

  <section class="blog-section" id="complaint-wall">
    <h2 class="section-title">Transparency Wall (Public Complaints)</h2>
    <p style="text-align:center; margin-bottom:2rem; color:#4a5568;">See how AI is resolving campus issues in real-time.
    </p>

    <div class="blog-container">
      <div class="blog-card glass">
        <div class="status-badge status-resolved">RESOLVED</div>
        <h3 class="blog-title">Hostel 3 Water Cooler Repair</h3>
        <p class="blog-meta">Reported by: Student • 2 Days ago</p>
        <p class="blog-excerpt">The issue regarding the RO filter in the 2nd-floor wing has been fixed. Maintenance team
          replaced the filter cartridge.</p>
        <div class="blog-footer">
          <span><i class="fa-solid fa-thumbs-up"></i> 45 Upvotes</span>
          <span><i class="fa-solid fa-check-circle"></i> Verified</span>
        </div>
      </div>

      <div class="blog-card glass">
        <div class="status-badge status-progress">IN PROGRESS</div>
        <h3 class="blog-title">Projector Malfunction in Lab 4</h3>
        <p class="blog-meta">Reported by: Faculty • Yesterday</p>
        <p class="blog-excerpt">Complaint auto-routed to IT Department. A technician has been assigned and is currently
          inspecting the wiring.</p>
        <div class="blog-footer">
          <span><i class="fa-solid fa-thumbs-up"></i> 12 Upvotes</span>
          <span><i class="fa-solid fa-clock"></i> ETA: 4 Hours</span>
        </div>
      </div>

      <div class="blog-card glass">
        <div class="status-badge status-resolved">RESOLVED</div>
        <h3 class="blog-title">Library Wi-Fi Connectivity</h3>
        <p class="blog-meta">Reported by: Student • 4 Days ago</p>
        <p class="blog-excerpt">Network congestion identified by AI analysis. Bandwidth has been increased for the
          reading room area.</p>
        <div class="blog-footer">
          <span><i class="fa-solid fa-thumbs-up"></i> 89 Upvotes</span>
          <span><i class="fa-solid fa-check-circle"></i> Verified</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ALUMNI SECTION -->
  <section class="alumni-section" id="alumni" style="margin-bottom: 4rem;">
    <h2 class="section-title">Alumni Excellence & Interaction</h2>
    <p style="text-align:center; margin-bottom:2rem; color:#4a5568;">Connect with our successful graduates reaching new
      heights.</p>

    <div class="faculty-container"> <!-- Reusing container for grid layout -->

      <div class="faculty-card glass">
        <img src="https://via.placeholder.com/100" alt="Alumni" class="faculty-img" style="border-radius:15px;">
        <h3 class="faculty-name">Rohan Gupta</h3>
        <p class="faculty-role" style="color:#10b981;">Software Engineer @ Google</p>
        <p class="faculty-bio">"CampusCare helped me organize my studies."</p>
        <a href="https://wa.me/" target="_blank"
          style="display:inline-block; margin-top:1rem; text-decoration:none; color:#25D366; font-weight:bold;">
          <i class="fa-brands fa-whatsapp" style="font-size:1.5rem;"></i> Connect
        </a>
      </div>

      <div class="faculty-card glass">
        <img src="https://via.placeholder.com/100" alt="Alumni" class="faculty-img" style="border-radius:15px;">
        <h3 class="faculty-name">Priya Singh</h3>
        <p class="faculty-role" style="color:#3b82f6;">Data Scientist @ Amazon</p>
        <p class="faculty-bio">"The AI lab resources were top-notch."</p>
        <a href="https://wa.me/" target="_blank"
          style="display:inline-block; margin-top:1rem; text-decoration:none; color:#25D366; font-weight:bold;">
          <i class="fa-brands fa-whatsapp" style="font-size:1.5rem;"></i> Connect
        </a>
      </div>

      <div class="faculty-card glass">
        <img src="https://via.placeholder.com/100" alt="Alumni" class="faculty-img" style="border-radius:15px;">
        <h3 class="faculty-name">Amit Verma</h3>
        <p class="faculty-role" style="color:#f59e0b;">Founder, EdTech Startup</p>
        <p class="faculty-bio">"Entrepreneurship cell guided my journey."</p>
        <a href="https://wa.me/" target="_blank"
          style="display:inline-block; margin-top:1rem; text-decoration:none; color:#25D366; font-weight:bold;">
          <i class="fa-brands fa-whatsapp" style="font-size:1.5rem;"></i> Connect
        </a>
      </div>

    </div>
  </section>

  <section class="faculty-section" id="faculty">
    <h2 class="section-title">Meet Our Academic Leaders</h2>
    <div class="faculty-container">
      <div class="faculty-card glass">
        <div style="position:absolute; top:15px; right:15px; cursor:pointer;" onclick="alert('Edit Icon Clicked')">
          <i class="fa-solid fa-pen-to-square" style="color:#a0aec0;"></i>
        </div>
        <img src="https://via.placeholder.com/100" alt="Prof Name" class="faculty-img">
        <h3 class="faculty-name">Dr. A. Sharma</h3>
        <p class="faculty-role">Dean of Academics</p>
        <p class="faculty-bio">Ph.D. in Computer Science with 15+ years of experience in AI research.</p>
      </div>

      <div class="faculty-card glass">
        <div style="position:absolute; top:15px; right:15px; cursor:pointer;" onclick="alert('Edit Icon Clicked')">
          <i class="fa-solid fa-pen-to-square" style="color:#a0aec0;"></i>
        </div>
        <img src="https://via.placeholder.com/100" alt="Prof Name" class="faculty-img">
        <h3 class="faculty-name">Prof. R. Das</h3>
        <p class="faculty-role">HOD, Mechanical Eng.</p>
        <p class="faculty-bio">Expert in Thermodynamics and Robotics. Spearheading automated labs.</p>
      </div>

      <div class="faculty-card glass">
        <div style="position:absolute; top:15px; right:15px; cursor:pointer;" onclick="alert('Edit Icon Clicked')">
          <i class="fa-solid fa-pen-to-square" style="color:#a0aec0;"></i>
        </div>
        <img src="https://via.placeholder.com/100" alt="Prof Name" class="faculty-img">
        <h3 class="faculty-name">Mrs. K. Verma</h3>
        <p class="faculty-role">Chief Warden (Hostels)</p>
        <p class="faculty-bio">Dedicated to ensuring student welfare and safe hostel environment.</p>
      </div>
    </div>
  </section>

  <footer>
    &copy; 2025 CampusCare. Built for the Future.
  </footer>

  <!-- FLOATING ACTION BUTTONS (SOS & AI) -->
  <div class="fab-container"
    style="position: fixed; bottom: 30px; right: 30px; z-index: 1000; display: flex; flex-direction: column; gap: 15px; align-items: flex-end;">

    <!-- AI Assistant Button -->
    <button onclick="toggleModal('ai-modal')"
      style="width: 60px; height: 60px; border-radius: 50%; border: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: transform 0.3s ease;">
      <i class="fa-solid fa-robot"></i>
    </button>

    <!-- SOS Button (Pulsating) -->
    <button onclick="toggleModal('sos-modal')"
      style="width: 60px; height: 60px; border-radius: 50%; border: none; background: #ef4444; color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4); animation: pulse-red 2s infinite;">
      <i class="fa-solid fa-bell-concierge"></i> <!-- Using bell/alert icon, or life-ring -->
    </button>
  </div>

  <!-- SOS MODAL -->
  <div id="sos-modal" class="modal-overlay"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
    <div class="modal-content glass"
      style="background: #fff; padding: 2rem; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; position: relative;">
      <button onclick="toggleModal('sos-modal')"
        style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
      <i class="fa-solid fa-triangle-exclamation" style="font-size: 3rem; color: #ef4444; margin-bottom: 1rem;"></i>
      <h2 style="color: #ef4444; margin-bottom: 0.5rem;">EMERGENCY SOS</h2>
      <p style="margin-bottom: 1.5rem;">Select your emergency type to alert nearest help.</p>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <!-- Row 1: Calls -->
        <a href="tel:100"
          style="background: #1f2937; color: white; padding: 10px; border-radius: 10px; text-decoration: none; font-weight: bold; grid-column: 1 / -1;">
          <i class="fa-solid fa-shield-halved"></i> Call Security / Police
        </a>

        <!-- Row 2: Medical Action -->
        <button onclick="alert('Requesting First Aid Kit... Warden Notified!')"
          style="background: #f59e0b; color: white; padding: 15px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; display:flex; flex-direction:column; align-items:center; gap:5px;">
          <i class="fa-solid fa-kit-medical" style="font-size:1.5rem;"></i> First Aid
        </button>

        <button
          onclick="const bg = prompt('Please enter the required Blood Group (e.g. O+):'); if(bg) alert(`Broadcasting Blood Requirement (${bg}) Alert to Campus!`)"
          style="background: #ef4444; color: white; padding: 15px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; display:flex; flex-direction:column; align-items:center; gap:5px;">
          <i class="fa-solid fa-droplet" style="font-size:1.5rem;"></i> Need Blood
        </button>

        <!-- Row 3: Others -->
        <a href="tel:101"
          style="background: #ef4444; color: white; padding: 10px; border-radius: 10px; text-decoration: none; font-weight: bold; display:flex; justify-content:center; align-items:center; gap:5px;">
          <i class="fa-solid fa-truck-medical"></i> Ambulance
        </a>

        <button onclick="alert('Panic Signal Sent with Location!')"
          style="background: #4b5563; color: white; padding: 10px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold;">
          Other / Panic
        </button>
      </div>
    </div>
  </div>

  <!-- AI ASSISTANT MODAL -->
  <div id="ai-modal" class="modal-overlay"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
    <div class="modal-content glass"
      style="background: #fff; padding: 2rem; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; position: relative;">
      <button onclick="toggleModal('ai-modal')"
        style="position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
      <i class="fa-solid fa-robot" style="font-size: 3rem; color: #667eea; margin-bottom: 1rem;"></i>
      <h2 style="color: #1f2937; margin-bottom: 0.5rem;">Campus AI Assistant</h2>
      <div id="ai-chat-history"
        style="text-align: left; max-height: 300px; overflow-y: auto; margin-bottom: 1rem; border: 1px solid #eee; padding: 10px; border-radius: 10px; background: #f9fafb; display:none;">
      </div>

      <input type="text" id="ai-input" placeholder="Ask about routine, hostel..."
        style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; margin-bottom: 1rem;">
      <button onclick="askAI()"
        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold;">Ask
        AI</button>
    </div>
  </div>

  <style>
    @keyframes pulse-red {
      0% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
      }
    }
  </style>

  <script>
    function toggleModal(id) {
      const modal = document.getElementById(id);
      if (modal.style.display === 'flex') {
        modal.style.display = 'none';
      } else {
        modal.style.display = 'flex';
      }
    }

    function checkModuleAccess(event, allowedRoles) {
      const userStr = localStorage.getItem('user');

      // 1. Check if Logged In
      if (!userStr) {
        event.preventDefault();
        // Optional: Alert before redirecting? User requested "redirected to login page"
        // Let's just redirect for smoother UX, or maybe a small confirm?
        // "I should be redirected to the login page" implies action.
        window.location.href = 'login.html';
        return;
      }

      const user = JSON.parse(userStr);

      // 2. Check Role Access
      if (allowedRoles === 'any') return; // Allow all logged in users

      if (!allowedRoles.includes(user.role)) {
        event.preventDefault();
        alert('Access Restricted: You do not have permission to view this module.');
      }
    }
  </script>

  <!-- Scripts -->
  <script src="assets/js/api.js"></script>
  <script src="assets/js/ai.js"></script>
  <script src="assets/js/landing.js"></script>
</body>

</html>